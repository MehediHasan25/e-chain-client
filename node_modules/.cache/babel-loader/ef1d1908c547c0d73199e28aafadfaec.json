{"ast":null,"code":"var _jsxFileName = \"/home/mehedi/Documents/e-newclient_v-2/e-chain-client/src/Component/Login.js\";\nimport React, { Component } from 'react';\nimport { Link, Redirect } from 'react-router-dom';\nimport axios from 'axios';\nimport { login } from \"./Url/User\";\nimport cookie from \"./utils/cookie\";\n\nclass Login extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      username: \"\",\n      usernameValidation: false,\n      password: \"\",\n      passwordValidation: false,\n      errors: {}\n    };\n\n    this.onSubmit = async e => {\n      e.preventDefault();\n      const _this$state = this.state,\n            username = _this$state.username,\n            password = _this$state.password;\n\n      if (username === '') {\n        this.setState({\n          errors: {\n            username: 'Please Enter Your Username'\n          }\n        });\n        return;\n      }\n\n      if (password === '') {\n        this.setState({\n          errors: {\n            password: 'Please Enter your password'\n          }\n        });\n      }\n\n      const obj = {\n        username,\n        password /////LoginApi called////////////////////\n\n      };\n      axios.post(login, obj).then(res => {\n        // console.log(res);\n        // console.log(res.headers['x-auth-token']);\n        let token = res.headers['x-auth-token'];\n        cookie.setCookie('x-auth-token', token, 120);\n        cookie.setCookie('username', username, 120);\n\n        if (res.data.userStatus === \"new\") {\n          this.props.history.replace('/greetings');\n        } else {\n          this.props.history.replace('/dashboard');\n        }\n      }).catch(err => {\n        if (err.response) {\n          if (err.response.status === 400 || err.response.status === 401) {\n            console.log(err.response.data);\n            alert(err.response.data.message); //alert(\"Mehedi will occur error\");\n          } else if (err.response.status === 404) {\n            alert(\"Not Found\");\n          } else if (err.response.status === 500) {\n            alert(err.response.data.message);\n          }\n        } else if (err.request) {\n          console.log(err.request);\n          alert(\"Error Connectiong\");\n        } else {\n          console.log(\"Error\", err.message);\n          alert(err.message);\n        }\n      }); // console.log(res.headers['x-auth-token']);\n      // let token = res.headers['x-auth-token'];\n      // let res = await axios.post(`http://localhost:4000/user/login`, obj);\n      // console.log(res.headers['x-auth-token']);\n      // let token = res.headers['x-auth-token'];\n      //this.setCookie('x-auth-token', token, 120);\n      // let gettoken = this.getCookie('x-auth-token');\n      // var h = {\n      //     'Content-Type': 'application/json',\n      //     'x-auth-token': gettoken \n      // }\n      // fetch(`http://localhost:4000/user/login`, {\n      //     method: 'POST', // or 'PUT'\n      //     body: JSON.stringify(obj), // data can be `string` or {object}!\n      //     headers:{\n      //       'Content-Type': 'application/json'\n      //     }\n      //   })\n      //   .then(async response => {\n      //       if(response.status === 400) {\n      //         let error = await response.json();\n      //         alert(error.message);\n      //        }else if(response.status === 401) {\n      //         let error = await response.json();\n      //          alert(error.message);\n      //       }else{\n      //           let token = response.headers['x-auth-token'];\n      //           this.setCookie('x-auth-token', token, 120);\n      //         this.props.history.replace('/login');\n      //       }\n      //     })\n      //   .catch(error => console.error('Error:', error));\n      //   let gettoken = this.getCookie('x-auth-token');\n      // var h = {\n      //     'Content-Type': 'application/json',\n      //     'x-auth-token': gettoken \n      // }\n      // let test = await axios.post(`http://localhost:4000/user/test`,null,{\"headers\":h});\n      // console.log(test);\n      // this.props.history.replace('/landingpage');\n    };\n\n    this.onChangeUserName = e => {\n      this.setState({\n        username: e.target.value,\n        usernameValidation: false\n      });\n    };\n\n    this.onChangePassword = e => {\n      this.setState({\n        password: e.target.value,\n        passwordValidation: false\n      });\n    };\n  }\n\n  componentWillMount() {\n    document.title = 'Login';\n  }\n\n  setCookie(cname, cvalue, minutes) {\n    var d = new Date();\n    d.setTime(d.getTime() + minutes * 60 * 1000);\n    var expires = \"expires=\" + d.toUTCString();\n    document.cookie = cname + \"=\" + cvalue + \"; \" + expires;\n  }\n\n  getCookie(cname) {\n    var name = cname + \"=\";\n    var decodedCookie = decodeURIComponent(document.cookie);\n    var ca = decodedCookie.split(';');\n\n    for (var i = 0; i < ca.length; i++) {\n      var c = ca[i];\n\n      while (c.charAt(0) === ' ') {\n        c = c.substring(1);\n      }\n\n      if (c.indexOf(name) === 0) {\n        return c.substring(name.length, c.length);\n      }\n    }\n\n    return \"\";\n  }\n\n  // handleUsernameClick = e => {\n  //     this.setState({usernameValidation: false});\n  // }\n  // handlePasswordClick = e => {\n  //     this.setState({passwordValidation: false});\n  // }\n  render() {\n    const _this$state2 = this.state,\n          username = _this$state2.username,\n          password = _this$state2.password,\n          errors = _this$state2.errors;\n\n    if (cookie.getCookie(\"x-auth-token\") !== \"\" && cookie.getCookie(\"username\") !== \"\") {\n      return React.createElement(Redirect, {\n        to: \"/dashboard\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      });\n    }\n\n    return React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        marginLeft: \"auto\",\n        marginRight: \"auto\"\n      },\n      className: \"col-sm-6 border border-light p-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      className: \"text-center \",\n      onSubmit: this.onSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"h4 mb-4\",\n      style: {\n        color: \"#00cccc\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, \"Login\"), React.createElement(\"i\", {\n      style: {\n        color: 'red',\n        textAlign: \"right\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    }, this.state.usernameValidation === true ? this.getUsernameError : \"\"), React.createElement(\"input\", {\n      label: \"Username\",\n      name: \"username\",\n      type: \"text\",\n      placeholder: \" User Id\",\n      value: username,\n      onChange: this.onChangeUserName,\n      error: errors.username,\n      id: \"defaultLoginFormusername\",\n      className: \"form-control mb-4 border border-primary\",\n      style: {\n        height: \"50px\"\n      },\n      onClick: this.handleUsernameClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }), React.createElement(\"i\", {\n      style: {\n        color: 'red',\n        textAlign: \"right\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }, this.state.passwordValidation === true ? this.getPasswordError : \"\"), React.createElement(\"input\", {\n      label: \"Password\",\n      name: \"password\",\n      type: \"password\",\n      placeholder: \"Password\",\n      value: password,\n      onChange: this.onChangePassword,\n      error: errors.password,\n      id: \"defaultLoginFormpassword\",\n      className: \"form-control mb-4 border border-primary\",\n      style: {\n        height: \"50px\"\n      },\n      onClick: this.handlePasswordClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"d-flex align-items-center justify-content-between\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      className: \"btn btn-info btn-block my-4\",\n      type: \"submit\",\n      style: {\n        backgroundColor: \"#00cccc\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214\n      },\n      __self: this\n    }, \"Log In\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    }, \"Not a member?\\xA0\", React.createElement(Link, {\n      to: \"/\",\n      style: {\n        color: \"#00cccc\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    }, \"SignUp\")))));\n  }\n\n}\n\nexport default Login;","map":{"version":3,"sources":["/home/mehedi/Documents/e-newclient_v-2/e-chain-client/src/Component/Login.js"],"names":["React","Component","Link","Redirect","axios","login","cookie","Login","state","username","usernameValidation","password","passwordValidation","errors","onSubmit","e","preventDefault","setState","obj","post","then","res","token","headers","setCookie","data","userStatus","props","history","replace","catch","err","response","status","console","log","alert","message","request","onChangeUserName","target","value","onChangePassword","componentWillMount","document","title","cname","cvalue","minutes","d","Date","setTime","getTime","expires","toUTCString","getCookie","name","decodedCookie","decodeURIComponent","ca","split","i","length","c","charAt","substring","indexOf","render","marginLeft","marginRight","color","textAlign","getUsernameError","height","handleUsernameClick","getPasswordError","handlePasswordClick","backgroundColor"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,IAAT,EAAeC,QAAf,QAA+B,kBAA/B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,KAAT,QAAsB,YAAtB;AACA,OAAOC,MAAP,MAAmB,gBAAnB;;AAEA,MAAMC,KAAN,SAAoBN,SAApB,CAA8B;AAAA;AAAA;AAAA,SAC1BO,KAD0B,GAClB;AACJC,MAAAA,QAAQ,EAAE,EADN;AAEJC,MAAAA,kBAAkB,EAAE,KAFhB;AAGJC,MAAAA,QAAQ,EAAE,EAHN;AAIJC,MAAAA,kBAAkB,EAAE,KAJhB;AAKJC,MAAAA,MAAM,EAAE;AALJ,KADkB;;AAAA,SAoC1BC,QApC0B,GAoCf,MAAOC,CAAP,IAAa;AACpBA,MAAAA,CAAC,CAACC,cAAF;AADoB,0BAEW,KAAKR,KAFhB;AAAA,YAEZC,QAFY,eAEZA,QAFY;AAAA,YAEFE,QAFE,eAEFA,QAFE;;AAKpB,UAAIF,QAAQ,KAAK,EAAjB,EAAqB;AACjB,aAAKQ,QAAL,CAAc;AAAEJ,UAAAA,MAAM,EAAE;AAAEJ,YAAAA,QAAQ,EAAE;AAAZ;AAAV,SAAd;AAEA;AACH;;AAED,UAAIE,QAAQ,KAAK,EAAjB,EAAqB;AACjB,aAAKM,QAAL,CAAc;AAAEJ,UAAAA,MAAM,EAAE;AAAEF,YAAAA,QAAQ,EAAE;AAAZ;AAAV,SAAd;AACH;;AACD,YAAMO,GAAG,GAAG;AACRT,QAAAA,QADQ;AAERE,QAAAA,QAFQ,CAMZ;;AANY,OAAZ;AAOAP,MAAAA,KAAK,CAACe,IAAN,CAAWd,KAAX,EAAkBa,GAAlB,EACKE,IADL,CACUC,GAAG,IAAI;AACT;AACA;AAEA,YAAIC,KAAK,GAAGD,GAAG,CAACE,OAAJ,CAAY,cAAZ,CAAZ;AACAjB,QAAAA,MAAM,CAACkB,SAAP,CAAiB,cAAjB,EAAiCF,KAAjC,EAAwC,GAAxC;AACAhB,QAAAA,MAAM,CAACkB,SAAP,CAAiB,UAAjB,EAA6Bf,QAA7B,EAAuC,GAAvC;;AACA,YAAIY,GAAG,CAACI,IAAJ,CAASC,UAAT,KAAwB,KAA5B,EAAmC;AAC/B,eAAKC,KAAL,CAAWC,OAAX,CAAmBC,OAAnB,CAA2B,YAA3B;AACH,SAFD,MAEO;AACH,eAAKF,KAAL,CAAWC,OAAX,CAAmBC,OAAnB,CAA2B,YAA3B;AACH;AACJ,OAbL,EAcKC,KAdL,CAcWC,GAAG,IAAI;AAEV,YAAIA,GAAG,CAACC,QAAR,EAAkB;AACd,cAAID,GAAG,CAACC,QAAJ,CAAaC,MAAb,KAAwB,GAAxB,IAA+BF,GAAG,CAACC,QAAJ,CAAaC,MAAb,KAAwB,GAA3D,EAAgE;AAC5DC,YAAAA,OAAO,CAACC,GAAR,CAAYJ,GAAG,CAACC,QAAJ,CAAaP,IAAzB;AACAW,YAAAA,KAAK,CAACL,GAAG,CAACC,QAAJ,CAAaP,IAAb,CAAkBY,OAAnB,CAAL,CAF4D,CAG7D;AACF,WAJD,MAKK,IAAIN,GAAG,CAACC,QAAJ,CAAaC,MAAb,KAAwB,GAA5B,EAAiC;AAClCG,YAAAA,KAAK,CAAC,WAAD,CAAL;AACH,WAFI,MAGA,IAAIL,GAAG,CAACC,QAAJ,CAAaC,MAAb,KAAwB,GAA5B,EAAiC;AAClCG,YAAAA,KAAK,CAACL,GAAG,CAACC,QAAJ,CAAaP,IAAb,CAAkBY,OAAnB,CAAL;AACH;AACJ,SAZD,MAaK,IAAGN,GAAG,CAACO,OAAP,EAAe;AAChBJ,UAAAA,OAAO,CAACC,GAAR,CAAYJ,GAAG,CAACO,OAAhB;AACAF,UAAAA,KAAK,CAAC,mBAAD,CAAL;AACH,SAHI,MAID;AACAF,UAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBJ,GAAG,CAACM,OAAzB;AACAD,UAAAA,KAAK,CAACL,GAAG,CAACM,OAAL,CAAL;AACH;AACJ,OArCL,EArBoB,CA+DpB;AACA;AAGA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AAEA;AACA;AACA;AACA;AAIA;AACA;AAEA;AACH,KAvJyB;;AAAA,SA0J1BE,gBA1J0B,GA0JPxB,CAAC,IAAI;AACpB,WAAKE,QAAL,CAAc;AAAER,QAAAA,QAAQ,EAAEM,CAAC,CAACyB,MAAF,CAASC,KAArB;AAA4B/B,QAAAA,kBAAkB,EAAE;AAAhD,OAAd;AACH,KA5JyB;;AAAA,SA6J1BgC,gBA7J0B,GA6JP3B,CAAC,IAAI;AACpB,WAAKE,QAAL,CAAc;AAAEN,QAAAA,QAAQ,EAAEI,CAAC,CAACyB,MAAF,CAASC,KAArB;AAA4B7B,QAAAA,kBAAkB,EAAE;AAAhD,OAAd;AACH,KA/JyB;AAAA;;AAS1B+B,EAAAA,kBAAkB,GAAG;AACjBC,IAAAA,QAAQ,CAACC,KAAT,GAAiB,OAAjB;AACH;;AAEDrB,EAAAA,SAAS,CAACsB,KAAD,EAAQC,MAAR,EAAgBC,OAAhB,EAAyB;AAC9B,QAAIC,CAAC,GAAG,IAAIC,IAAJ,EAAR;AACAD,IAAAA,CAAC,CAACE,OAAF,CAAUF,CAAC,CAACG,OAAF,KAAeJ,OAAO,GAAG,EAAV,GAAe,IAAxC;AACA,QAAIK,OAAO,GAAG,aAAaJ,CAAC,CAACK,WAAF,EAA3B;AACAV,IAAAA,QAAQ,CAACtC,MAAT,GAAkBwC,KAAK,GAAG,GAAR,GAAcC,MAAd,GAAuB,IAAvB,GAA8BM,OAAhD;AACH;;AAEDE,EAAAA,SAAS,CAACT,KAAD,EAAQ;AACb,QAAIU,IAAI,GAAGV,KAAK,GAAG,GAAnB;AACA,QAAIW,aAAa,GAAGC,kBAAkB,CAACd,QAAQ,CAACtC,MAAV,CAAtC;AACA,QAAIqD,EAAE,GAAGF,aAAa,CAACG,KAAd,CAAoB,GAApB,CAAT;;AACA,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,EAAE,CAACG,MAAvB,EAA+BD,CAAC,EAAhC,EAAoC;AAChC,UAAIE,CAAC,GAAGJ,EAAE,CAACE,CAAD,CAAV;;AACA,aAAOE,CAAC,CAACC,MAAF,CAAS,CAAT,MAAgB,GAAvB,EAA4B;AACxBD,QAAAA,CAAC,GAAGA,CAAC,CAACE,SAAF,CAAY,CAAZ,CAAJ;AACH;;AACD,UAAIF,CAAC,CAACG,OAAF,CAAUV,IAAV,MAAoB,CAAxB,EAA2B;AACvB,eAAOO,CAAC,CAACE,SAAF,CAAYT,IAAI,CAACM,MAAjB,EAAyBC,CAAC,CAACD,MAA3B,CAAP;AACH;AACJ;;AACD,WAAO,EAAP;AACH;;AA+HD;AACA;AACA;AACA;AACA;AACA;AAEAK,EAAAA,MAAM,GAAG;AAAA,yBACkC,KAAK3D,KADvC;AAAA,UACGC,QADH,gBACGA,QADH;AAAA,UACaE,QADb,gBACaA,QADb;AAAA,UACuBE,MADvB,gBACuBA,MADvB;;AAGL,QAAIP,MAAM,CAACiD,SAAP,CAAiB,cAAjB,MAAqC,EAArC,IAA2CjD,MAAM,CAACiD,SAAP,CAAiB,UAAjB,MAAiC,EAAhF,EAAoF;AAChF,aAAO,oBAAC,QAAD;AAAU,QAAA,EAAE,EAAC,YAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAP;AACH;;AAGD,WACI;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,KAAK,EAAE;AACRa,QAAAA,UAAU,EAAE,MADJ;AAERC,QAAAA,WAAW,EAAE;AAFL,OAAZ;AAGG,MAAA,SAAS,EAAC,kCAHb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAKI;AAAM,MAAA,SAAS,EAAC,cAAhB;AAA+B,MAAA,QAAQ,EAAE,KAAKvD,QAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEI;AAAG,MAAA,SAAS,EAAC,SAAb;AAAuB,MAAA,KAAK,EAAE;AAAEwD,QAAAA,KAAK,EAAE;AAAT,OAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAFJ,EAII;AAAG,MAAA,KAAK,EAAE;AAAEA,QAAAA,KAAK,EAAE,KAAT;AAAgBC,QAAAA,SAAS,EAAE;AAA3B,OAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAiD,KAAK/D,KAAL,CAAWE,kBAAX,KAAkC,IAAlC,GAAyC,KAAK8D,gBAA9C,GAAiE,EAAlH,CAJJ,EAKI;AAAO,MAAA,KAAK,EAAC,UAAb;AAAwB,MAAA,IAAI,EAAC,UAA7B;AAAwC,MAAA,IAAI,EAAC,MAA7C;AAAoD,MAAA,WAAW,EAAC,UAAhE;AAA2E,MAAA,KAAK,EAAE/D,QAAlF;AAA4F,MAAA,QAAQ,EAAE,KAAK8B,gBAA3G;AAA6H,MAAA,KAAK,EAAE1B,MAAM,CAACJ,QAA3I;AAAqJ,MAAA,EAAE,EAAC,0BAAxJ;AAAmL,MAAA,SAAS,EAAC,yCAA7L;AAAuO,MAAA,KAAK,EAAE;AAAEgE,QAAAA,MAAM,EAAE;AAAV,OAA9O;AAAkQ,MAAA,OAAO,EAAE,KAAKC,mBAAhR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MALJ,EAMI;AAAG,MAAA,KAAK,EAAE;AAAEJ,QAAAA,KAAK,EAAE,KAAT;AAAgBC,QAAAA,SAAS,EAAE;AAA3B,OAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAiD,KAAK/D,KAAL,CAAWI,kBAAX,KAAkC,IAAlC,GAAyC,KAAK+D,gBAA9C,GAAiE,EAAlH,CANJ,EAOI;AAAO,MAAA,KAAK,EAAC,UAAb;AAAwB,MAAA,IAAI,EAAC,UAA7B;AAAwC,MAAA,IAAI,EAAC,UAA7C;AAAwD,MAAA,WAAW,EAAC,UAApE;AAA+E,MAAA,KAAK,EAAEhE,QAAtF;AAAgG,MAAA,QAAQ,EAAE,KAAK+B,gBAA/G;AAAiI,MAAA,KAAK,EAAE7B,MAAM,CAACF,QAA/I;AAAyJ,MAAA,EAAE,EAAC,0BAA5J;AAAuL,MAAA,SAAS,EAAC,yCAAjM;AAA2O,MAAA,KAAK,EAAE;AAAE8D,QAAAA,MAAM,EAAE;AAAV,OAAlP;AAAsQ,MAAA,OAAO,EAAE,KAAKG,mBAApR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAPJ,EASI;AAAK,MAAA,SAAS,EAAC,mDAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MATJ,EAwBI;AAAQ,MAAA,SAAS,EAAC,6BAAlB;AAAgD,MAAA,IAAI,EAAC,QAArD;AAA8D,MAAA,KAAK,EAAE;AAAEC,QAAAA,eAAe,EAAE;AAAnB,OAArE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAxBJ,EA2BI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAAsB,oBAAC,IAAD;AAAM,MAAA,EAAE,EAAC,GAAT;AAAa,MAAA,KAAK,EAAE;AAAEP,QAAAA,KAAK,EAAE;AAAT,OAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAAtB,CA3BJ,CALJ,CADJ,CADJ;AAoDH;;AApOyB;;AAuO9B,eAAe/D,KAAf","sourcesContent":["import React, { Component } from 'react';\nimport { Link, Redirect } from 'react-router-dom';\nimport axios from 'axios';\nimport { login } from \"./Url/User\";\nimport cookie from \"./utils/cookie\";\n\nclass Login extends Component {\n    state = {\n        username: \"\",\n        usernameValidation: false,\n        password: \"\",\n        passwordValidation: false,\n        errors: {}\n    };\n\n    componentWillMount() {\n        document.title = 'Login';\n    }\n\n    setCookie(cname, cvalue, minutes) {\n        var d = new Date();\n        d.setTime(d.getTime() + (minutes * 60 * 1000));\n        var expires = \"expires=\" + d.toUTCString();\n        document.cookie = cname + \"=\" + cvalue + \"; \" + expires;\n    }\n\n    getCookie(cname) {\n        var name = cname + \"=\";\n        var decodedCookie = decodeURIComponent(document.cookie);\n        var ca = decodedCookie.split(';');\n        for (var i = 0; i < ca.length; i++) {\n            var c = ca[i];\n            while (c.charAt(0) === ' ') {\n                c = c.substring(1);\n            }\n            if (c.indexOf(name) === 0) {\n                return c.substring(name.length, c.length);\n            }\n        }\n        return \"\";\n    }\n\n    onSubmit = async (e) => {\n        e.preventDefault();\n        const { username, password } = this.state;\n\n\n        if (username === '') {\n            this.setState({ errors: { username: 'Please Enter Your Username' } });\n\n            return;\n        }\n\n        if (password === '') {\n            this.setState({ errors: { password: 'Please Enter your password' } });\n        }\n        const obj = {\n            username,\n            password\n        }\n\n\n        /////LoginApi called////////////////////\n        axios.post(login, obj)\n            .then(res => {\n                // console.log(res);\n                // console.log(res.headers['x-auth-token']);\n\n                let token = res.headers['x-auth-token'];\n                cookie.setCookie('x-auth-token', token, 120);\n                cookie.setCookie('username', username, 120);\n                if (res.data.userStatus === \"new\") {\n                    this.props.history.replace('/greetings');\n                } else {\n                    this.props.history.replace('/dashboard');\n                }\n            })\n            .catch(err => {\n               \n                if (err.response) {\n                    if (err.response.status === 400 || err.response.status === 401) {\n                        console.log(err.response.data);\n                        alert(err.response.data.message);\n                       //alert(\"Mehedi will occur error\");\n                    }\n                    else if (err.response.status === 404) {\n                        alert(\"Not Found\");\n                    }\n                    else if (err.response.status === 500) {\n                        alert(err.response.data.message);\n                    }\n                }\n                else if(err.request){\n                    console.log(err.request);\n                    alert(\"Error Connectiong\");\n                }\n                else{\n                    console.log(\"Error\", err.message);\n                    alert(err.message);\n                }\n            });\n\n      \n\n\n        // console.log(res.headers['x-auth-token']);\n        // let token = res.headers['x-auth-token'];\n\n\n        // let res = await axios.post(`http://localhost:4000/user/login`, obj);\n        // console.log(res.headers['x-auth-token']);\n        // let token = res.headers['x-auth-token'];\n        //this.setCookie('x-auth-token', token, 120);\n        // let gettoken = this.getCookie('x-auth-token');\n\n        // var h = {\n        //     'Content-Type': 'application/json',\n        //     'x-auth-token': gettoken \n        // }\n\n        // fetch(`http://localhost:4000/user/login`, {\n        //     method: 'POST', // or 'PUT'\n        //     body: JSON.stringify(obj), // data can be `string` or {object}!\n        //     headers:{\n        //       'Content-Type': 'application/json'\n        //     }\n        //   })\n        //   .then(async response => {\n        //       if(response.status === 400) {\n        //         let error = await response.json();\n        //         alert(error.message);\n        //        }else if(response.status === 401) {\n        //         let error = await response.json();\n        //          alert(error.message);\n\n        //       }else{\n        //           let token = response.headers['x-auth-token'];\n        //           this.setCookie('x-auth-token', token, 120);\n        //         this.props.history.replace('/login');\n        //       }\n\n        //     })\n        //   .catch(error => console.error('Error:', error));\n\n        //   let gettoken = this.getCookie('x-auth-token');\n\n        // var h = {\n        //     'Content-Type': 'application/json',\n        //     'x-auth-token': gettoken \n        // }\n\n\n\n        // let test = await axios.post(`http://localhost:4000/user/test`,null,{\"headers\":h});\n        // console.log(test);\n\n        // this.props.history.replace('/landingpage');\n    }\n\n\n    onChangeUserName = e => {\n        this.setState({ username: e.target.value, usernameValidation: false });\n    }\n    onChangePassword = e => {\n        this.setState({ password: e.target.value, passwordValidation: false });\n    }\n\n    // handleUsernameClick = e => {\n    //     this.setState({usernameValidation: false});\n    // }\n    // handlePasswordClick = e => {\n    //     this.setState({passwordValidation: false});\n    // }\n\n    render() {\n        const { username, password, errors } = this.state;\n\n        if (cookie.getCookie(\"x-auth-token\") !== \"\" && cookie.getCookie(\"username\") !== \"\") {\n            return <Redirect to='/dashboard' />\n        }\n\n\n        return (\n            <div className=\"container\" >\n                <div style={{\n                    marginLeft: \"auto\",\n                    marginRight: \"auto\"\n                }} className=\"col-sm-6 border border-light p-5\">\n\n                    <form className=\"text-center \" onSubmit={this.onSubmit}>\n\n                        <p className=\"h4 mb-4\" style={{ color: \"#00cccc\" }}>Login</p>\n\n                        <i style={{ color: 'red', textAlign: \"right\" }}>{this.state.usernameValidation === true ? this.getUsernameError : \"\"}</i>\n                        <input label=\"Username\" name=\"username\" type=\"text\" placeholder=\" User Id\" value={username} onChange={this.onChangeUserName} error={errors.username} id=\"defaultLoginFormusername\" className=\"form-control mb-4 border border-primary\" style={{ height: \"50px\" }} onClick={this.handleUsernameClick}></input>\n                        <i style={{ color: 'red', textAlign: \"right\" }}>{this.state.passwordValidation === true ? this.getPasswordError : \"\"}</i>\n                        <input label=\"Password\" name=\"password\" type=\"password\" placeholder=\"Password\" value={password} onChange={this.onChangePassword} error={errors.password} id=\"defaultLoginFormpassword\" className=\"form-control mb-4 border border-primary\" style={{ height: \"50px\" }} onClick={this.handlePasswordClick}></input>\n\n                        <div className=\"d-flex align-items-center justify-content-between\">\n                            {/* <div>\n\n                                <div className=\"custom-control custom-checkbox\">\n                                    <input type=\"checkbox\" className=\"custom-control-input\" id=\"defaultLoginFormRemember\"></input>\n                                    <label className=\"custom-control-label\" for=\"defaultLoginFormRemember\">Remember me</label>\n                                </div>\n                            </div> */}\n                            {/* <div>\n\n                                <a href=\"\" style={{ color: \"#00cccc\" }}>Forgot password?</a>\n                            </div> */}\n                        </div>\n\n\n                        <button className=\"btn btn-info btn-block my-4\" type=\"submit\" style={{ backgroundColor: \"#00cccc\" }}>Log In</button>\n\n\n                        <p>Not a member?&nbsp;<Link to=\"/\" style={{ color: \"#00cccc\" }}>SignUp</Link></p>\n\n\n\n\n\n\n\n                    </form>\n                </div>\n\n\n\n\n\n\n            </div>\n        );\n    }\n}\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}